myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) %>% remove_empty() -> myfinal
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
library(janitor)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) %>% remove_empty(which = "rows") -> myfinal
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
library(janitor)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) %>% remove_empty(which = "rows") -> myfinal
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
library(janitor)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) %>% remove_empty(which = "rows") -> myfinal
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
tibble(myoutput = myoutput) %>% View()
tibble(myoutput = myoutput) %>% remove_empty()
tibble(myoutput = myoutput) %>% prin(n=100)
tibble(myoutput = myoutput) %>% print(n=100)
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) %>%
filter(trimws(myoutput)!="") -> myfinal
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) %>%
filter(trimws(myoutput)!="") -> myfinal
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
nrow(myoutput1)
nrow(myfinal)
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
print(paste("blank rows removed: "), nrow(myoutput1) - nrow(myfinal))
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
print(paste("blank rows removed: ", nrow(myoutput1) - nrow(myfinal)))
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
print(paste("blank rows removed: ", nrow(myoutput1) - nrow(myfinal)))
print("created mymantras_combined.json")
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
print(paste("blank rows removed: ", nrow(myoutput1) - nrow(myfinal)))
print("success: created mymantras_combined.json")
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
library(tidyverse)
dir("./projects/web/powermantra/static/assets/text/json/mantras/onebyone/") -> myfiles
myoutput <- NULL
errmsg <- NULL
for(i in 1:length(myfiles)) {
mytmp <- readLines(
sprintf("./projects/web/powermantra/static/assets/text/json//mantras/onebyone/mymantra_%d.json", i)
)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == 1) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(i)
}
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
print(paste("blank rows removed: ", nrow(myoutput1) - nrow(myfinal)))
print("success: created mymantras_combined.json")
writeLines(myfinal$myoutput,"./projects/web/powermantra/static/assets/text/json/mantras/mymantras_combined.json")
}
mergeFiles(4,6) -> addEntry
library(tidyverse)
setwd("/Users/keyurdesai/projects/web/powermantra/static/assets/text/json/mantras/")
mergeFiles <- function(begin, end) {
mydir <- sprintf("onebyone/%d_%d",begin, end)
mymergedfile <- sprintf("/merged/mantra_%d_%d.json", begin, end)
list.files(mydir, full.names = TRUE) -> myfilesToMerge
myoutput <- NULL
errmsg <- NULL
for(i in begin:end) {
myfile <- sprintf("./%s/mymantra_%d.json", mydir, i)
mytmp <- readLines(myfile)
if(as.integer(str_replace(str_replace(mytmp[2], "\"id\":", ""), ",", "")) != i) {
print(errmsg <- paste("id mismtach at:", i))
break
} else {
if(i == begin) {
myoutput <- mytmp
} else {
myoutput <- c(myoutput, ",", mytmp)
}
}
print(myfile)
}
print(myfilesToMerge)
print(mymergedfile)
if(is.null(errmsg)) {
myoutput <- c("[", myoutput, "]")
tibble(myoutput = myoutput) -> myoutput1
myoutput1 %>%
filter(trimws(myoutput)!="") -> myfinal
print(paste("blank rows removed: ", nrow(myoutput1) - nrow(myfinal)))
writeLines(myfinal$myoutput, paste0(".", mymergedfile))
print(sprintf("success: created %s", paste0(".", mymergedfile)))
finalDestination <- "../../../../../public/assets/text/json/mantras/"
file.copy(paste0(".", mymergedfile), paste0(finalDestination, mymergedfile), overwrite = TRUE)
}
ans <- tibble(myMergedFile = mymergedfile, myTimeStamp = timestamp())
return(ans)
}
mergeFiles(4,6) -> addEntry
##------ Sun May  9 16:21:57 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
mergeFiles(4,6) -> addEntry
##------ Mon May 10 10:07:08 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
mergeFiles(4,6) -> addEntry
##------ Mon May 10 10:08:23 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
mergeFiles(4,6) -> addEntry
##------ Mon May 10 10:10:50 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
mergeFiles(4,6) -> addEntry
##------ Mon May 10 10:12:02 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
mergeFiles(4,6) -> addEntry
##------ Mon May 10 10:12:32 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
mergeFiles(4,6) -> addEntry
##------ Mon May 10 10:14:30 2021 ------##
#create / update the .json that keeps track of the combined files
#the loadText() will use this file to keep track of what files to load
library(jsonlite)
if(!file.exists("./myFilesToLoad.json")) {
writeLines(prettify(toJSON(addEntry)), "./myFilesToLoad.json")
print("success: created ./myFilesToLoad.json")
} else {
fromJSON("./myFilesToLoad.json") -> myCurrentEntries
myCurrentEntries %>%
filter(myMergedFile != addEntry$myMergedFile) %>%
bind_rows(addEntry) %>%
mutate(temp = str_replace(myMergedFile, "/merged/mantra_", "")) %>%
mutate(temp = str_replace(temp, ".json", "")) %>%
separate(temp, into = c("temp1", "temp2"), sep = "_") %>%
arrange(temp1) %>%
select(-temp1, -temp2) -> myOutput
writeLines(prettify(toJSON(myOutput)), "./myFilesToLoad.json")
print("success: updated ./myFilesToLoad.json")
}
file.copy("./myFilesToLoad.json", "../../../../../public/assets/text/json/mantras/myFilesToLoad.json", overwrite = TRUE)
